---
title: 하둡 스터디 03
date: 2021-03-03 14:22:00
categories:
 - hadoop
tag:
 - hadoop
---

### 3장 연산과 스토리지

컴퓨터 아키텍처와 리눅스 운영체제 세부 내용 중 중요한 부분을 다뤄보고, 각 서버의 용량에 대해 알아본 다음, 마지막으로 이런 각 유형의 서버가 어떻게 표준 클러스터로 합쳐질 수 있는지 살펴본다.

<!-- more -->

#### 하둡 이해를 위한 컴퓨터 아키텍쳐

##### 보급형 서버

하둡은 2개의 프로세서를 가진 시스템(2소켓 시스템)으로 구성돼 있다. 2개의 CPU는 각각 3개의 코어를 가지고 있고 인터프로세서 링크로 연결되어 있다. 메모리는 캐시메모리를 사용하며 L1 코어,L2,L3 (숫자가 작을 수록 빠르고 용량이 작다, CPU와 밀접)

##### 서버 CPU와 RAM

- x86 아키텍처의 역할
  - CPU 종류 : 32-bit (x86), 64-bit (x86-64, IA64 and AMD64)
  - x86 이 CPU 90% 이상 점유 현황 (인텔 70%, AMD 30%)
- 하둡 스레드와 코어
  - 하이퍼스레딩
    - SMT(Simultaneous Multi-Threading) - 동시 멀티스레징
      - 단일 코어 하드웨어 효율을 높이기 위함
      - 스레딩간 CPU 캐시 공유
      - 워크로드 처리 효율을 높이는데 큰 역할 (I/O 대기 있다는 전제하)
  - 대칭형 멀티프로세싱
    - SMP(Symmetric Multi Processing) - 대칭형 멀티프로세싱
      - 다수의 코어로 하나의 프로세서 사용 혹은 다수 프로세서 사용

##### 불균일 메모리 접근

- NUMA가 빅데이터에서 왜 중요한가?
  - Non-Uniform Memory Access - 불균일 메모리 접근
    - 로컬 메모리와 원격 메모리 차이
  - 성능에 지대한 차이를 가져올 수 있다.

##### CPU 사양

- 고성능 싱글 스레드에 의존하지 않고 코어 수를 최대화하는 것이 좋다.

##### RAM

- 디스크 사용을 줄이고 메모리에서 실행되게 해야 한다.

#### 엔터프라이즈에 적합한 보급형 스토리지

##### 연산 및 스토리지의 모듈성

##### 모든 것이 자바

##### 복제 또는 이레이저 코딩

##### 대안

#### 하둡과 리눅스 스토리지 스택

##### 사용자 공간

##### 주요 시스템 호출

##### 리눅스 페이지 캐시

##### 숏서킷 읽기와 제로카피 읽기

##### 파일시스템

#### 이레이저 코딩과 복제

##### 생각해볼 거리

- 네트워크 성능
- 쓰기 성능
  - 자바 코더
  - ISA-L 코더
- 지역성 최적화
- 읽기 성능

##### 권장 가이드

#### 로우레벨 스토리지

##### 스토리지 컨트롤러

- RAID란?
- 컨트롤러 캐시
- 가이드라인

##### 디스크 계층

- SAS, NL-SAS, SATA(혹은 SSD) 중 어떤 선택?
- 디스크 크기
- 디스크 캐시

#### 서버 폼 팩터

- 랙 마운트 폼 팩터 평가
  - CPU 밀도
  - 메모리 밀도
  - 스토리지 밀도
  - 스토리지 I/O 밀도
  - 네트워크 I/O 밀도
  - 소프트웨어 라이선스 효율성

##### 폼 팩터 비교

##### 가이드

#### 워크로드 프로파일

#### 클러스터 구성과 노드 종류

##### 마스터 노드

##### 워커 노드

##### 유틸리티 노드

##### 엣지 노드

##### 소형 클러스터 구성

##### 중형 클러스터 구성

##### 대형 클러스터 구성

#### 정리